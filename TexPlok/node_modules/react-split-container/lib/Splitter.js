'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var _react=require('react'),_react2=_interopRequireDefault(_react),_reactDom=require('react-dom'),_reactFlex=require('react-flex'),_reactClass=require('react-class'),_reactClass2=_interopRequireDefault(_reactClass),_dragHelper=require('drag-helper'),_dragHelper2=_interopRequireDefault(_dragHelper),_objectAssign=require('object-assign'),_objectAssign2=_interopRequireDefault(_objectAssign),_join=require('./join'),_join2=_interopRequireDefault(_join);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var CLASS_NAME='react-split-container__splitter',emptyFn=function emptyFn(){},ARROWS={right:_react2.default.createElement('svg',{fill:'#000000',height:'22',width:'22',viewBox:'0 0 24 24'},_react2.default.createElement('path',{d:'M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z'}),_react2.default.createElement('path',{d:'M0-.25h24v24H0z',fill:'none'})),left:_react2.default.createElement('svg',{fill:'#000000',height:'22',width:'22',viewBox:'0 0 24 24'},_react2.default.createElement('path',{d:'M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z'}),_react2.default.createElement('path',{d:'M0-.5h24v24H0z',fill:'none'})),down:_react2.default.createElement('svg',{fill:'#000000',height:'22',width:'22',viewBox:'0 0 24 24'},_react2.default.createElement('path',{d:'M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z'}),_react2.default.createElement('path',{d:'M0-.75h24v24H0z',fill:'none'})),up:_react2.default.createElement('svg',{fill:'#000000',height:'22',width:'22',viewBox:'0 0 24 24'},_react2.default.createElement('path',{d:'M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z'}),_react2.default.createElement('path',{d:'M0 0h24v24H0z',fill:'none'}))};var Splitter=function(_Component){function Splitter(){return _classCallCheck(this,Splitter),_possibleConstructorReturn(this,Object.getPrototypeOf(Splitter).apply(this,arguments))}return _inherits(Splitter,_Component),_createClass(Splitter,[{key:'prepareChildren',value:function prepareChildren(a){var b=[],c='horizontal'==a.orientation,d=CLASS_NAME+'-inner',e=c,f={justifyContent:'center',alignItems:'center',wrap:!1,row:e,column:!e},g=a.collapsedIndex,h=a.locked;if(h)return null;var i=0==g,j=1==g,k=a.collapsible||[],l=!1!==k[0],m=!1!==k[1];return(l&&!i||j)&&b.push(_react2.default.createElement(_reactFlex.Flex,_extends({},f,{key:'first',className:(0,_join2.default)(d,d+'--first',d+'--orientation-'+a.orientation),onClick:this.toggleCollapse.bind(this,-1)}),c?ARROWS.up:ARROWS.left)),(m&&!j||i)&&b.push(_react2.default.createElement(_reactFlex.Flex,_extends({},f,{key:'second',className:(0,_join2.default)(d,d+'--second',d+'--orientation-'+a.orientation),onClick:this.toggleCollapse.bind(this,1)}),c?ARROWS.down:ARROWS.right)),b}},{key:'prepareProps',value:function prepareProps(){var a=(0,_objectAssign2.default)({},this.props);return a.className=this.prepareClassName(a),a.children=this.prepareChildren(a),a}},{key:'prepareClassName',value:function prepareClassName(a){var b=a.collapsedIndex,c=a.collapsing,d=a.expanding,e=a.locked,f=a.draggable,g=a.constrained;return(0,_join2.default)(a.className,CLASS_NAME,CLASS_NAME+'--orientation-'+a.orientation,e&&CLASS_NAME+'--locked',f&&CLASS_NAME+'--draggable',g&&CLASS_NAME+'--constrained',void 0!=b&&(0,_join2.default)(CLASS_NAME+'--collapsed',CLASS_NAME+'--collapsed-'+(0==b?'start':'end')))}},{key:'render',value:function render(){var a=this.prepareProps(this.props),b='horizontal'==a.orientation,c=b;return _react2.default.createElement(_reactFlex.Flex,_extends({wrap:!1,row:c,column:!c,justifyContent:'center',alignItems:'center'},a,{draggable:null,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown}))}},{key:'handleDoubleClick',value:function handleDoubleClick(a){this.props.onDoubleClick(a);var b=this.props.collapsedIndex;null==b||this.toggleCollapse(0==b?1:-1)}},{key:'handleMouseDown',value:function handleMouseDown(a){var _this2=this;(a.preventDefault(),this.props.onMouseDown(a),!this.props.locked&&this.props.draggable&&null==this.props.collapsedIndex)&&function(){var b=(0,_reactDom.findDOMNode)(_this2),c=b.parentNode,d='vertical'==_this2.props.orientation?'top':'left';(0,_dragHelper2.default)(a,{scope:_this2,region:b,constrainTo:c,onDragStart:function onDragStart(e,f){f.diff[d]=0,this.props.onDragStart(f.diff,e)},onDrag:function onDrag(e,f){f.diff[d]=0,this.props.onDrag(f.diff,e)},onDrop:function onDrop(e,f){f.diff[d]=0,this.props.onDrop(f.diff,e)}})}()}},{key:'toggleCollapse',value:function toggleCollapse(a,b){// event.stopPropagation()
if(!this.props.locked){var _props=this.props,c=_props.collapsedIndex,d=_props.onExpand,e=_props.onCollapse,f=void 0==c?//otherwise, we are collapsing
1==a?1:0://there is a collapsed item
//so we are expanding
c,g=c===f?d:e;g(f,b)}}}]),Splitter}(_reactClass2.default);exports.default=Splitter;Splitter.propTypes={size:_react.PropTypes.number,orientation:_react.PropTypes.string,locked:_react.PropTypes.bool,collapsedIndex:_react.PropTypes.oneOf([void 0,0,1])},Splitter.defaultProps={isSplitter:!0,onDragStart:emptyFn,onDrag:emptyFn,onDrop:emptyFn,onCollapse:emptyFn,onExpand:emptyFn,onDoubleClick:emptyFn,onMouseDown:emptyFn,beforeMin:null,afterMin:null};